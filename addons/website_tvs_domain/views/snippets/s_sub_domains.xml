<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Snippet -->
    <template id="s_sub_domains" name="Sub Domains">
        <t t-call="website.s_dynamic_snippet_template">
            <t t-set="snippet_name" t-value="'s_sub_domains'"/>
            <t t-set="snippet_classes" t-value="'s_dynamic_snippet_sub_domains'"/>
        </t>
    </template>

    <!-- Load-time templates (rendered in JS on page load) -->
    <!-- template id must have the format: 'dynamic_filter_template_' + 'model name replace . by _' + 'extra'   -->
    <!-- Layout -->
    <template id="dynamic_filter_template_tvs_domain_sub_layout" name="Sub Domain Layout">
        <div t-foreach="records" t-as="data" class="w-100" data-number-of-elements="3">
            <t t-set="record" t-value="data['_record']"/>
            <t t-if="record">
                <div class="s_sub_domains_section d-flex align-items-center justify-content-center">
                    <div class="s_sub_domains_banner_img">
                        <img t-if="record.banner_image"
                             t-att-src="'data:image/png;base64,' + record.banner_image.decode('utf-8')"/>
                        <div class="overlay" />
                    </div>
                    <div class="s_sub_domains_name text-center" t-if="record.name">
                        <a t-attf-href="/domain/#{record.slug}">
                            <h3 t-field="record.name"/>
                        </a>
                    </div>
                </div>
            </t>
        </div>
    </template>

    <!-- Options -->
    <template id="s_sub_domains_options" inherit_id="website.snippet_options">
        <xpath expr="." position="inside">
            <t t-call="website_tvs_domain.s_sub_domains_options_template">
                <t t-set="snippet_name" t-value="'dynamic_snippet_sub_domains'"/>
                <t t-set="snippet_selector" t-value="'.s_dynamic_snippet_sub_domains'"/>
            </t>
        </xpath>
    </template>

    <template id="s_sub_domains_options_template" inherit_id="website.s_dynamic_snippet_options_template">
        <xpath expr="//we-select[@data-name='filter_opt']" position="after">
            <we-select t-if="snippet_name == 'dynamic_snippet_sub_domains'" string="Domain" data-no-preview="true"
                       data-name="domain_opt" data-attribute-name="filterByDomainId">
                <we-button data-select-data-attribute="-1">All sub domains</we-button>
                <!-- the blog list will be generated in js -->
            </we-select>
        </xpath>
    </template>

    <!-- Assets -->
    <record id="website_tvs_domain.s_sub_domains_000_scss" model="ir.asset">
        <field name="name">Sub Domain 000 SCSS</field>
        <field name="bundle">web.assets_frontend</field>
        <field name="path">website_tvs_domain/static/src/snippets/s_sub_domains/000.scss</field>
    </record>

    <record id="website_tvs_domain.s_sub_domains_000_js" model="ir.asset">
        <field name="name">Sub Domain 000 JS</field>
        <field name="bundle">web.assets_frontend</field>
        <field name="path">website_tvs_domain/static/src/snippets/s_sub_domains/000.js</field>
    </record>
</odoo>
